@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-accent: #FA7A5F;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  .font-lora {
    font-family: var(--font-lora), Georgia, serif;
  }
}

/* Fond éditeur ChordPro aligné sur les encadrés (titre, etc.) */
.chordpro-editor .cm-editor,
.chordpro-editor .cm-scroller,
.chordpro-editor .cm-content {
  background-color: transparent !important;
}

/* Éviter le zoom automatique sur mobile (iOS Safari zoom si font-size < 16px) */
@media (max-width: 768px) {
  .chordpro-editor .cm-content,
  .chordpro-editor .cm-line {
    font-size: 16px !important;
  }
  /* Champs de formulaire (titre, artiste, etc.) */
  input[type="text"],
  input[type="email"],
  input[type="number"],
  textarea {
    font-size: 16px !important;
  }
}
.chordpro-editor .cm-gutters {
  background-color: transparent !important;
}

/* Thème clair : texte plus foncé, sélection de ligne plus douce */
html:not(.dark) .chordpro-editor .cm-editor {
  color: #18181b;
}
html:not(.dark) .chordpro-editor .cm-content {
  caret-color: var(--color-accent);
}
html:not(.dark) .chordpro-editor .cm-cursor {
  border-left-color: var(--color-accent);
}
html:not(.dark) .chordpro-editor .cm-selectionBackground,
html:not(.dark) .chordpro-editor .cm-content ::selection {
  background-color: color-mix(in srgb, var(--color-accent) 20%, transparent);
}
html:not(.dark) .chordpro-editor .cm-activeLine {
  background-color: color-mix(in srgb, var(--color-accent) 10%, transparent);
}
html:not(.dark) .chordpro-editor .cm-activeLineGutter {
  background-color: color-mix(in srgb, var(--color-accent) 12%, transparent);
}
html:not(.dark) .chordpro-editor .cm-gutters {
  color: #71717a;
}

/* Crochets correspondants dans l'éditeur ChordPro (thème clair et sombre) */
.chordpro-editor .cm-editor.cm-focused .cm-matchingBracket,
.chordpro-editor .cm-editor.cm-focused .cm-nonmatchingBracket {
  background-color: color-mix(in srgb, var(--color-accent) 28%, transparent) !important;
  border-radius: 2px;
}
.dark .chordpro-editor .cm-editor.cm-focused .cm-matchingBracket,
.dark .chordpro-editor .cm-editor.cm-focused .cm-nonmatchingBracket {
  background-color: color-mix(in srgb, var(--color-accent) 35%, transparent) !important;
}

/* Player audio en thème sombre */
.dark .audio-player {
  color-scheme: dark;
}
.dark .audio-player::-webkit-media-controls-panel {
  background-color: rgb(39 39 42);
}
.dark .audio-player::-webkit-media-controls-enclosure {
  background-color: rgb(39 39 42);
  border-radius: 6px;
}

/* Ascenseurs personnalisés (sidebar + zone contenu) */
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgb(113 113 122 / 0.6) transparent;
}
.dark * {
  scrollbar-color: rgb(113 113 122 / 0.5) transparent;
}
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: rgb(113 113 122 / 0.4);
  border-radius: 4px;
}
*::-webkit-scrollbar-thumb:hover {
  background: rgb(113 113 122 / 0.6);
}
.dark *::-webkit-scrollbar-thumb {
  background: rgb(113 113 122 / 0.35);
}
.dark *::-webkit-scrollbar-thumb:hover {
  background: rgb(113 113 122 / 0.55);
}

/* Overlay bruit subtil (style Fretlist) */
.noise-overlay {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.03;
}
